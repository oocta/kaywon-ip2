<!doctype html>
<html lang="en" data-framework="jquery">
	<head>
		<meta charset="utf-8">
		<title>Interaction Programming</title>
		<link rel="stylesheet" href="./css/normalize.css">
		<link rel="stylesheet" href="./css/index.css">
	</head>
	<body>
		<section>
			<div id="imageSlider" class="imageSlider">
				<ul id="sliderContainer" class="sliderContainer">
					<!-- 슬라이더 아이템의 위치 -->
				</ul>
				<div id="controller" class="controller">
					<button id="leftButton" class="left">왼쪽으로</button>
					<button id="rightButton" class="right">오른쪽으로</button>
				</div>
				<div id="pagination" class="pagination">
					
				</div>
			</div>
		</section>

		<!-- Javascript -->
		<script type="text/javascript" src="./js/jquery.js"></script>
		<script type="text/javascript">
			//자바스크립트 코드 작성 영역
			//Step 3. 왼쪽, 오른쪽 버튼 클릭시 슬라이드가 진행되도록 이벤트를 할당합니다.
			var colorsArray = ['red', 'blue', 'green'];
      
      $(document).ready(function () {
        
        var $sliderContainer = $('#sliderContainer');
        var maxPage = colorsArray.length; //슬라이드 컨텐츠의 길이를 정의합니다.
        var contentWidth = $sliderContainer.width(); // 슬라이드 컨텐츠 width
        var currentPage = 0; //현재페이지 변수
        // #1
        // 왼쪽, 오른쪽 버튼을 미리 변수에 할당합니다.
        var $leftButton = $('#leftButton');
        var $rightButton = $('#rightButton');
        
        $.each(colorsArray, function (idx, val) {
          var $li = $('<li/>', {'style': 'background-color:' + val});
          $sliderContainer.append($li);
        });
        
        $sliderContainer.width(maxPage * contentWidth);
        
        // #2
        // 왼쪽, 오른쪽 버튼에 이벤트를 추가합니다.
        $leftButton.on('click', function () {
          // 왼쪽으로 이동할 경우 currentPage(현재페이지)가 1씩 감소합니다.
          // 하지만 -1 페이지는 없으므로 (최소 0페이지) 최소값은 0으로 제한합니다.
          if (currentPage > 0) {
            currentPage--;
          } else {
            currentPage = 0;
          }
          // 버튼클릭시 감소시킨 currentPage(현재페이지)를 contentWidth와 함께 전달합니다.
          move(currentPage, contentWidth);
        });
        
        // #3
        // 오른쪽 버튼도 
        $rightButton.on('click', function () {
          // 오른쪽 버튼도 마찬가지로 currentPage(현재페이지)를 증가하는 역할만 수행하고,
          // 실제 슬라이드를 움직이는 기능은 move 함수를 활용합니다.
          // 이때 currentPage(현재페이지)는 최대 배열의 원소갯수를 넘길 수 없으므로,
          // 미리 할당한 maxPage 변수를 참조하여, 최대값을 넘지 않도록 조건으로 제한합니다.
          // 주의할 점 저희는 currentPage를 배열의 인덱싱에 맞춰 0으로 설정했습니다. 그러므로,
          // 배열의 전체 길이에서 1을뺀 길이를 최대페이지로 고정해야합니다.
          // (maxPage 변수의 값은 3 이지만 currentPage를 0부터 시작하는 경우, 최대페이지는 2.)
          if (currentPage < maxPage - 1) {
            currentPage++;
          } else {
            // 최대값에 도달하는 경우, maxPage로 할당처리 합니다.
            // 마찬가지 최대 진행가능한 페이지는 maxPage - 1 입니다. (배열의 인덱싱에 맞추었으므로)
            currentPage = maxPage - 1;
          }
          console.log(maxPage)
          move(currentPage, contentWidth);
          
        });
        
        function move(cPage, cWidth) {
          $sliderContainer.animate({'margin-left': cPage * cWidth * -1 }, 1000);
        }
        
        // 이제 왼쪽으로 버튼과 오른쪽 버튼을 클릭해 이미지가 한장씩 이동하는걸 테스트하고 최대 페이지 및 최소 페이지에 도달 시
        // 더이상 슬라이더가 이동하지 않으면 성공!
        
      });
      
		</script>
	</body>
</html>
